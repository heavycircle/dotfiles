# ~/.config/tmux/tmux.conf
#
# Minimal tmux status line built for bash. 
#
# Author: heavycircle
# Date: Sometime 2024
# License: MIT

# ---- GENERAL -------------------------------------------------

# Default options
set-option -g default-command   /bin/bash
set-option -g default-shell     /bin/bash
set-option -g default-terminal  "tmux-256color"

# Status line
set-option -g status on
set-option -g status-bg default
set-option -g status-interval   1
set-option -g status-justify absolute-centre
set-option -g status-keys vi
set-option -g status-left ''
set-option -g status-right ''
set-option -g status-position top
set-option -g status-style bg=default

# Window index
set-option -g base-index 1
set-option -g renumber-windows on

# Miscellaneous options
set-option -g editor nvim
set-option -g escape-time  0
set-option -g prefix C-a
set-option -g repeat-time 0

# Leftover options
set-option -s focus-events on
set-option -g history-limit 50000

# Colorscheme
source ~/.config/tmux/themes/current.conf

# ---- WINDOW --------------------------------------------------

# Status bar
set-window-option -g automatic-rename on
set-window-option -g clock-mode-style 24

# Window input
set-window-option -g mode-keys vi
set-window-option -g mouse on

# ---- ENVIRONMENT ---------------------------------------------

set-environment -g PATH "/usr/local/bin:/bin:/usr/bin"
set-environment -g PATH "/opt/homebrew/bin:/bin:/usr/bin"

# ---- BUFFERS -------------------------------------------------

bind b list-buffers
bind B choose-buffer "paste-buffer -b '%%'"
bind p paste-buffer -p
bind P paste-buffer

# ---- KEYBINDS ------------------------------------------------

# Leader key switch
unbind C-b
bind C-a send-prefix

# Use <leader>+X for killing windows
unbind &
bind X kill-window

# Edit source file
bind r source-file ~/.config/tmux/tmux.conf

# Navigation (vim keys)
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Navigation (alt-vim without leader)
bind-key -n M-h select-pane -L
bind-key -n M-j select-pane -D
bind-key -n M-k select-pane -U
bind-key -n M-l select-pane -R

# Pane resizing (vim keys)
bind-key H resize-pane -L 2
bind-key J resize-pane -D 2
bind-key K resize-pane -U 2
bind-key L resize-pane -R 2

# Keep CWD across pane splits
bind  c  new-window      -c "#{pane_current_path}"
bind  %  split-window -h -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"

# Highlight to copy
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip"
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip"
bind -T copy-mode-vi Escape send -X cancel
bind -T copy-mode-vi H send -X start-of-line
bind -T copy-mode-vi L send -X end-of-line

# ---- TEMPLATES -----------------------------------------------

bind u run-shell ~/.config/tmux/pwn

